import*as f from"https://cdn.jsdelivr.net/npm/lightweight-charts@4.1/dist/lightweight-charts.standalone.production.mjs";var h=globalThis.getComputedStyle(document.body),v={muted:h.getPropertyValue("--b2"),primary:h.getPropertyValue("--pink")},V=class{constructor(t){this.element=t;this.chart=f.createChart(this.element,{autoSize:!0,handleScale:!1,handleScroll:!1,grid:{vertLines:{visible:!1},horzLines:{visible:!0,color:v.muted}},layout:{background:{type:f.ColorType.Solid,color:"transparent"},textColor:h.color,fontFamily:h.fontFamily},rightPriceScale:{scaleMargins:{top:0,bottom:0}},timeScale:{lockVisibleTimeRangeOnResize:!0,borderVisible:!1,timeVisible:!0,secondsVisible:!1,fixLeftEdge:!0,fixRightEdge:!0}}),this.chart.autoSizeActive()||alert("Chart is not auto-sizing. It will not work right."),this.series=this.chart.addLineSeries({color:v.primary,priceFormat:{type:"custom",formatter:e=>e.toFixed(0)+" pg/mL"},baseLineVisible:!1,priceLineVisible:!0,pointMarkersVisible:!1,crosshairMarkerVisible:!1,autoscaleInfoProvider:e=>{let r=e();return r!=null&&(r.priceRange.minValue=0,r.priceRange.maxValue*=1.1),r}})}chart;series;update(t){this.series.setData(t.map(e=>({time:e.t,value:e.v}))),console.log(t),this.chart.timeScale().fitContent()}};var T=[1,7,14,30];function w(b){let t={};for(let e of T){let r=e*24;t[e]=b.slice(-r).map(i=>i.v).reduce((i,l)=>i+l,0)/r}return t}var p=3600,d=class{f;f_0;f_1;constructor(t,e){this.f=r=>(t[r]??0)*e,this.f_0=0,this.f_1=t.length}predict(t,e){if(t.length===0)return Promise.resolve([]);t.sort((c,o)=>c-o);let r=this.f_0,i=this.f_1,l=e.concurrence>0?Math.min(this.f_1,e.intervalHours*e.concurrence):this.f_1;console.debug("predictor:",{f_0:r,f_1:i,f_1short:l});let g=Date.now()/1e3,u=g-e.hoursAgo*p;console.debug("predictor: from",new Date(u*1e3).toISOString(),"to",new Date(g*1e3).toISOString());let y=Math.ceil((g-u)/p);console.debug("predictor: hours",y);let a=Array(y).fill(0);console.debug("values",a);for(let[c,o]of t.entries()){let s=Math.floor((o-u)/p)+r,n=s+(t.length-c<=e.concurrence?i:l);if(console.debug("for",o,"going from",s,"to",n,"of",a.length,"hours"),!(n<0)){s=Math.max(0,s),n=Math.min(a.length,n),console.debug("for",o,"total hours taken is",n-s);for(let m=s;m<n;m++)a[m]+=this.f(m-s)}}console.debug("values",a);let S=a.map((c,o)=>({t:u+o*p,v:c}));return Promise.resolve(S)}};var x=[0,8.5,17,25.5,34,47.7,59.6,71.4,83.3,88.6,93.8,99,102.7,103.2,103.8,104.3,104.8,105.3,105.9,106.4,106.9,107.4,108,108.5,108.1,108.1,108.1,108.1,108.1,108.1,109.2,110.3,111.4,112.5,113.6,114.7,114.4,111.9,109.4,106.9,104.4,101.9,99.4,96.9,94.4,91.9,89.4,86.9,84.9,84.4,84,83.6,83.2,82.8,82.4,81.9,81.5,81.1,80.7,80.3,79.9,78.3,76.8,75.3,73.7,72.2,70.7,69.2,67.6,66.1,64.6,63.1,61.5,61.4,61.3,61.1,61,60.8,60.7,60.6,60.4,60.3,60.1,60,59.9,59.4,59,58.6,58.2,57.8,57.4,56.9,56.5,56.1,55.7,55.3,54.9,54.4,54,53.6,53.2,52.8,52.4,51.9,51.5,51.1,50.7,50.3,49.9,49.4,49,48.6,48.2,47.8,47.4,46.9,46.5,46.1,45.7,45.3,44.9,44.4,44,43.6,43.2,42.8,42.4,41.9,41.5,41.1,40.7,40.3,39.9,39.4,39,38.6,38.2,37.8,37.4,36.9,36.5,36.1,35.7,35.3,34.9,34.4,34,33.6,33.2,32.8,32.4,31.9,31.5,31.1,30.7,30.3,29.9,29.4,29,28.6,28.2,27.8,27.4,26.9,26.5,26.1,25.7,25.3,24.9];var _=x,L=1,D=new d(_,L);export{d as DiscreteHourlyPredictor,V as EstrogenPlotter,T as averageDays,w as calculateAverages,D as patchesPredictor};
//# sourceMappingURL=hrtplotter.js.map
